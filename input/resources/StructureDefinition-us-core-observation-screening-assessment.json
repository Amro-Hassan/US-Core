{
    "abstract": false,
    "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Observation",
    "date": "2022-04-20",
    "derivation": "constraint",
    "description": "The US Core Observation Screening Assessment Profile meets the requirements of the US Core Data for Interoperability (USCDI) Assessments. To promote interoperability and adoption through common implementation, it sets the minimum expectations for the Observation Resource to record, search, and fetch observations representing the questions and responses to surveys and screening and assessment tools. For example, a social history status such as education or food insecurity or an assessment of the patient's cognitive, functional, or disability status. It can represent a single response, multiple responses, and multi-select \"check all that apply\" type questions. It identifies which core elements, extensions, vocabularies, and value sets **SHALL** be present in the resource when using this profile. It provides the floor for standards development for specific use cases.",
    "differential": {
        "element": [
            {
                "comment": "\\-",
                "constraint": [
                    {
                        "expression": "(component.empty() and hasMember.empty()) implies (dataAbsentReason.exists() or value.exists())",
                        "human": "If there is no component or hasMember element then either a value[x] or a data absent reason must be present",
                        "key": "us-core-2",
                        "severity": "error",
                        "xpath": "exists(f:component) or exists(f:hasMember) or exists(f:*[starts-with(local-name(.), 'value')]) or exists(f:dataAbsentReason)"
                    },
                    {
                        "expression": "valueQuantity.system.empty() or valueQuantity.system = 'http://unitsofmeasure.org'",
                        "human": "SHALL use UCUM for coded quantity units.",
                        "key": "us-core-3",
                        "severity": "error",
                        "xpath": "not(exists(f:valueQuantity/f:system) ) or f:valueQuantity/f:system[@value='http://unitsofmeasure.org']"
                    }
                ],
                "definition": "\\-",
                "id": "Observation",
                "path": "Observation",
                "short": "Survey Observation"
            },
            {
                "id": "Observation.status",
                "mustSupport": true,
                "path": "Observation.status"
            },
            {
                "id": "Observation.category",
                "min": 1,
                "mustSupport": true,
                "path": "Observation.category",
                "slicing": {
                    "discriminator": [
                        {
                            "path": "$this",
                            "type": "pattern"
                        }
                    ],
                    "rules": "open"
                }
            },
            {
                "id": "Observation.category:survey",
                "max": "1",
                "min": 1,
                "mustSupport": true,
                "path": "Observation.category",
                "patternCodeableConcept": {
                    "coding": [
                        {
                            "code": "survey",
                            "system": "http://terminology.hl7.org/CodeSystem/observation-category"
                        }
                    ]
                },
                "requirements": "Used for filtering if the observation is an assessment or screening.",
                "sliceName": "survey"
            },
            {
                "binding": {
                    "description": "Note that other codes are permitted, see [Required Bindings When Slicing by Value Sets](http://hl7.org/fhir/us/core/general-requirements.html#required-bindings-when-slicing-by-value-sets)",
                    "strength": "required",
                    "valueSet": "http://hl7.org/fhir/us/core/ValueSet/us-core-screening-assessment-observation-category"
                },
                "definition": "Categories that a provider may use in their workflow to classify that this Observation is related to a USCDI Health Status/Assessments Data Class.",
                "id": "Observation.category:screening-assessment",
                "mustSupport": true,
                "path": "Observation.category",
                "requirements": "Used for filtering the type of screening or assessment observation.",
                "sliceName": "screening-assessment"
            },
            {
                "binding": {
                    "strength": "preferred",
                    "valueSet": "http://hl7.org/fhir/us/core/ValueSet/us-core-survey-codes"
                },
                "id": "Observation.code",
                "mustSupport": true,
                "path": "Observation.code"
            },
            {
                "id": "Observation.subject",
                "min": 1,
                "mustSupport": true,
                "path": "Observation.subject",
                "type": [
                    {
                        "code": "Reference",
                        "targetProfile": [
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"
                        ]
                    }
                ]
            },
            {
                "comment": "At least a date should be present unless this observation is a historical report.",
                "condition": [
                    "us-core-1"
                ],
                "constraint": [
                    {
                        "expression": "$this is DateTime implies $this.toString().length() >= 10",
                        "human": "Datetime must be at least to day.",
                        "key": "us-core-1",
                        "severity": "error",
                        "xpath": "f:matches(effectiveDateTime,/\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z)/)"
                    }
                ],
                "definition": "The time or time-period the observed value is asserted as being true. For biological subjects - e.g. human patients - this is usually called the \"physiologically relevant time\".",
                "id": "Observation.effective[x]",
                "mustSupport": true,
                "path": "Observation.effective[x]",
                "type": [
                    {
                        "code": "dateTime",
                        "extension": [
                            {
                                "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                "valueBoolean": true
                            }
                        ]
                    },
                    {
                        "code": "Period"
                    },
                    {
                        "code": "Timing"
                    },
                    {
                        "code": "instant"
                    }
                ]
            },
            {
                "comment": "Some questions on questionnaires are not answered directly (e.g., asserted) by the individual completing the questionnaire, but are derived from answers to one or more other questions. For types of answers, `Observation.performer` should not be specified and `Observation.derivedFrom` should reference the relevant Screening Response Observation(s).",
                "id": "Observation.performer",
                "mustSupport": true,
                "path": "Observation.performer",
                "type": [
                    {
                        "_targetProfile": [
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": true
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            }
                        ],
                        "code": "Reference",
                        "targetProfile": [
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitioner",
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-organization",
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient",
                            "http://hl7.org/fhir/StructureDefinition/PractitionerRole",
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-careteam",
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-relatedperson"
                        ]
                    }
                ]
            },
            {
                "comment": "An observation may have a value if it represents an individual survey, screening, or assessment question and answer pair. An observation should not have a value if it represents a multi-question or multi-select \u201ccheck all that apply\u201d responses. If a value is present, the datatype for this element should be determined by Observation.code.  A CodeableConcept with just a text would be used instead of a string if the field was usually coded, or if the type associated with the Observation.code defines a coded value.",
                "condition": [
                    "us-core-2",
                    "us-core-3"
                ],
                "id": "Observation.value[x]",
                "meaningWhenMissing": "For questions represented in LOINC that allow one answer, If the LOINC Normative Answer List for a LOINC code offers an adequate code for why an Observation.value may not be known, it should be used as the value for Observation.value. However, If the LOINC Normative Answer List for a LOINC code does not offer an adequate code for why an Observation.value may not be known, Observation.dataAbsentReason should be used in lieu of Observation.value.",
                "mustSupport": true,
                "path": "Observation.value[x]",
                "type": [
                    {
                        "code": "Quantity",
                        "extension": [
                            {
                                "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                "valueBoolean": true
                            }
                        ]
                    },
                    {
                        "code": "CodeableConcept",
                        "extension": [
                            {
                                "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                "valueBoolean": true
                            }
                        ]
                    },
                    {
                        "code": "string",
                        "extension": [
                            {
                                "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                "valueBoolean": true
                            }
                        ]
                    },
                    {
                        "code": "boolean"
                    },
                    {
                        "code": "integer"
                    },
                    {
                        "code": "Range"
                    },
                    {
                        "code": "Ratio"
                    },
                    {
                        "code": "SampledData"
                    },
                    {
                        "code": "time"
                    },
                    {
                        "code": "dateTime"
                    },
                    {
                        "code": "Period"
                    }
                ]
            },
            {
                "comment": "\"Null\" or exceptional values can be represented two ways in FHIR Observations.  One way is to simply include them in the value set and represent the exceptions in the value.  The alternate way is to use the value element for actual observations and use the explicit dataAbsentReason element to record exceptional values. For a given LOINC question, if the LOINC answer list includes concepts such as 'unknown' or 'not available', they should be used for Observation.value. Where these concepts are not part of the value set for Observation.value, the Observation.dataAbsentReason can be used if necessary and appropriate.",
                "condition": [
                    "us-core-2"
                ],
                "id": "Observation.dataAbsentReason",
                "mustSupport": true,
                "path": "Observation.dataAbsentReason"
            },
            {
                "comment": "This grouping element is used to represent surveys, screenings, and assessments that group several questions together or individual questions with  \u201ccheck all that apply\u201d responses. For example in the simplest case a flat multi-question survey where the \"panel\" observation is the survey instrument itself and instead of an `Observation.value` the `hasMember` element references other Observation that represent the individual questions answer pairs. When there is a heirarchical grouping of questions, the observation \"panels\" can be nested. Because surveys, screenings, and assessments can be arbitrarily complex structurally, not all structures can be represented using this Observation grouping pattern.",
                "definition": "Aggregate set of Observations that represent question answer pairs for both multi-question surveys, screenings, and assessments and multi-select questions.",
                "id": "Observation.hasMember",
                "mustSupport": true,
                "path": "Observation.hasMember",
                "short": "Reference to panel or multi-select responses",
                "type": [
                    {
                        "_targetProfile": [
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": true
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            }
                        ],
                        "code": "Reference",
                        "targetProfile": [
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-observation-screening-assessment",
                            "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse",
                            "http://hl7.org/fhir/StructureDefinition/MolecularSequence"
                        ]
                    }
                ]
            },
            {
                "definition": "Observations or or other resource such as a QuestionnaireResponse from which this observation value is derived.",
                "id": "Observation.derivedFrom",
                "mustSupport": true,
                "path": "Observation.derivedFrom",
                "short": "Related Observation(s) or other resource the observation is made from",
                "type": [
                    {
                        "_targetProfile": [
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": true
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": true
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            },
                            {
                                "extension": [
                                    {
                                        "url": "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                                        "valueBoolean": false
                                    }
                                ]
                            }
                        ],
                        "code": "Reference",
                        "targetProfile": [
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-observation-screening-assessment",
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-questionnaireresponse",
                            "http://hl7.org/fhir/us/core/StructureDefinition/us-core-documentreference",
                            "http://hl7.org/fhir/StructureDefinition/ImagingStudy",
                            "http://hl7.org/fhir/StructureDefinition/Media",
                            "http://hl7.org/fhir/StructureDefinition/MolecularSequence"
                        ]
                    }
                ]
            }
        ]
    },
    "fhirVersion": "4.0.1",
    "id": "us-core-observation-screening-assessment",
    "kind": "resource",
    "name": "USCoreObservationScreeningAssessmentProfile",
    "resourceType": "StructureDefinition",
    "status": "active",
    "title": "US Core Observation Screening Assessment Profile",
    "type": "Observation",
    "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-observation-screening-assessment"
}